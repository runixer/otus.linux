[bastions]
${bastion.name} ansible_host=${bastion.network_interface.0.nat_ip_address}

[db]
${db.name} ansible_host=${db.network_interface.0.ip_address}

[nginx]
%{ for host in nginx ~}
${host.name} ansible_host=${host.network_interface.0.ip_address}
%{ endfor ~}

[all:vars]
ansible_connection=ssh
ansible_user=${username}

[nginx:vars]
ansible_ssh_common_args='-o ProxyCommand="ssh -o StrictHostKeyChecking=no -W %h:%p -q ${username}@${bastion.network_interface.0.nat_ip_address}"'

[db:vars]
ansible_ssh_common_args='-o ProxyCommand="ssh -o StrictHostKeyChecking=no -W %h:%p -q ${username}@${bastion.network_interface.0.nat_ip_address}"'
